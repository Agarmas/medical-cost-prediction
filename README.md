# FastAPI Medical Cost Prediction

This is a simple API built using FastAPI that predicts insurance charges based on a set of input features. The model is pre-trained and can be used to make predictions based on the following input parameters:

- **Age**
- **Sex**
- **BMI (Body Mass Index)**
- **Children (number of children/dependents)**
- **Smoker status**
- **Region (Northeast, Northwest, Southeast, Southwest)**

The prediction is based on a model loaded from a pre-saved `model.joblib` file.

## Requirements

Before using the API, ensure you have the following dependencies installed:

- **FastAPI**: To create the web API.
- **Uvicorn**: ASGI server to run the application.
- **joblib**: To load the pre-trained model.
- **numpy**: For numerical operations.

You can install the necessary packages using pip:

```bash
pip install fastapi uvicorn joblib numpy
```

## Running the API

To run the FastAPI server locally, use Uvicorn. Navigate to the folder where `app.py` is located and run:

```bash
uvicorn api:app --reload
```

This will start the server on `http://127.0.0.1:8000`. You can access the API documentation at `http://127.0.0.1:8000/docs`, which is auto-generated by FastAPI.

## Endpoints

### `/predict/` (POST)

This endpoint accepts a JSON object containing the features for prediction and returns the predicted insurance charge price.

#### Request Body

The request body should be a JSON object with the following keys:

- **age**: (int) Age of the person (e.g., 30).
- **sex**: (bool) `True` for male, `False` for female.
- **bmi**: (float) Body Mass Index (e.g., 29.5).
- **children**: (int) Number of children or dependents (e.g., 2).
- **smoker**: (bool) `True` if the person is a smoker, `False` if not.
- **region_northeast**: (bool) `True` if the person lives in the Northeast region, `False` otherwise.
- **region_northwest**: (bool) `True` if the person lives in the Northwest region, `False` otherwise.
- **region_southeast**: (bool) `True` if the person lives in the Southeast region, `False` otherwise.
- **region_southwest**: (bool) `True` if the person lives in the Southwest region, `False` otherwise.

#### Example Request

```json
{
  "age": 30,
  "sex": true,
  "bmi": 29.5,
  "children": 2,
  "smoker": false,
  "region_northeast": true,
  "region_northwest": false,
  "region_southeast": false,
  "region_southwest": false
}
```

#### Response

The API will return a JSON object with the predicted insurance price rounded to two decimal places.

```json
{
  "price": 2120.45
}
```

### Key Explanation

- **age**: The age of the person (integer).
- **sex**: Gender of the person, represented as a boolean (`True` for male, `False` for female).
- **bmi**: The body mass index of the person (float).
- **children**: The number of children or dependents (integer).
- **smoker**: Whether the person is a smoker (`True` if yes, `False` if no).
- **region**: The region where the person lives (one of the four regions: Northeast, Northwest, Southeast, Southwest), represented as boolean values. Only one region should be marked as `True` in a request.

### Calculation

The returned **price** is calculated as:

```python
price = (1 + EARNINGS) * prediction[0]
```

Where `EARNINGS` is a constant multiplier (e.g., `0.1`), and `prediction[0]` is the value predicted by the pre-trained model.

## API Documentation

FastAPI automatically generates interactive API documentation, which you can access via the following URL in your browser:

- **Swagger UI**: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
- **ReDoc**: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

These interfaces allow you to test the API directly from your browser.

## Testing the API

You can test the API using tools like `curl`, Postman, or directly through the interactive Swagger UI. Here's an example of how to test it with `curl`:

```bash
curl -X 'POST' \
  'http://127.0.0.1:8000/predict/' \
  -H 'Content-Type: application/json' \
  -d '{
  "age": 30,
  "sex": true,
  "bmi": 29.5,
  "children": 2,
  "smoker": false,
  "region_northeast": true,
  "region_northwest": false,
  "region_southeast": false,
  "region_southwest": false
}'
```

The server will return the predicted insurance price.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

This README provides clear instructions on how to run, test, and use the API. It is designed to be user-friendly for anyone who needs to interact with your FastAPI model prediction service.